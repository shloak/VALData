<html>

  <head>
    <script src="//www.parsecdn.com/js/parse-1.6.7.min.js"></script>
  </head>

  <body onload="initial()">
    <div class="imageTable">
      <table>

        <tbody>
          <tr>
            <td>
              <img id="img_1" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_1"> </p>

            </td>
            <td>
              <img id="img_2" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_2"> </p>

            </td>
            <td>
              <img id="img_3" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_3"> </p>

            </td>
            <td>
              <img id="img_4" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_4"> </p>

            </td>
          </tr>
        </tbody>
      </table>
      <table>

        <tbody>
          <tr>
            <td>
              <img id="img_5" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_5"> </p>

            </td>
            <td>
              <img id="img_6" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_6"> </p>

            </td>
            <td>
              <img id="img_7" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_7"> </p>

            </td>
            <td>
              <img id="img_8" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_8"> </p>

            </td>
          </tr>
        </tbody>
      </table>
      <table>

        <tbody>
          <tr>
            <td>
              <img id="img_9" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_9"> </p>

            </td>
            <td>
              <img id="img_10" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_10"> </p>

            </td>
            <td>
              <img id="img_11" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_11"> </p>

            </td>
            <td>
              <img id="img_12" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_12"> </p>

            </td>
          </tr>
        </tbody>
      </table>
      <table>

        <tbody>
          <tr>
            <td>
              <img id="img_13" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_13"> </p>

            </td>
            <td>
              <img id="img_14" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_14"> </p>

            </td>
            <td>
              <img id="img_15" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_15"> </p>

            </td>
            <td>
              <img id="img_16" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_16"> </p>

            </td>
          </tr>
        </tbody>
      </table>
      <table>

        <tbody>
          <tr>
            <td>
              <img id="img_17" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_17"> </p>

            </td>
            <td>
              <img id="img_18" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_18"> </p>

            </td>
            <td>
              <img id="img_19" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_19"> </p>

            </td>
            <td>
              <img id="img_20" style="max-width: 100%; height: auto; width: 100%;" />
              <p id="cap_20"> </p>

            </td>
          </tr>
        </tbody>
      </table>
      <br>

    </div>

    <button onclick="generate()">Load</button>
  </body>

  <script>
    Parse.initialize("p4tWFy9DoQKEKAxKNycBu3QH6htzRcZDzMw1ywFa", "kg3IFa5DBIGXraX5hegFsSM29giG1btPM3wUvxpN");
    var array = ["1", "44474", "210751"];
    var arrayObjects;
    //var current = 0;
    var counter = 0;

    function ParseStuff() {
      var VALData = Parse.Object.extend("VALData");
      var query = new Parse.Query(VALData);
      query.exists("tag");
      query.limit(500);
      query.find({
        success: function(results) {
          //alert("Successfully retrieved " + results.length + " objects.");
          // Do something with the returned Parse.Object values
          arrayObjects = results.slice(0);
          //for (var i = 0; i < 5; i++) {
          //arrayObjects[i] = results[i];
          //alert(object.id + ' - ' + object.get('tag'));
          //document.getElementById("cap_20").innerHTML = object.get("tag");
          //}
        },
        error: function(error) {
          alert("Error: " + error.code + " " + error.message);
        }
      });
    }

    function generate() {
      for (var i = 1; i <= 20; i++) {
        var x = document.getElementById("img_" + i);
        x.src = ("http://mscoco.org/images/" + arrayObjects[counter].get("imageId"));
        var y = document.getElementById("cap_" + i);
        y.innerHTML = arrayObjects[counter].get("tag");
        counter = (counter + 1) % arrayObjects.length;
      }
    }

    function nextButton() {
      //ParseStuff();
      //current = ((current+1) % array.length);
      generate();
    }

    function initial() {
      ParseStuff();
      generate();
    }

  </script>

</html>
